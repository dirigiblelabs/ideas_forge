<div class="idea-list-item list-group-item" style="display: flex;">
	<a class="title" ng-bind="detailsVm.idea.shortText" ui-sref="list.entity({ideaId:detailsVm.idea.idf_id, idea: detailsVm.idea})"></a>
	<div style="flex:1 0 auto; display: flex;">
		<div class="rating-compartment">
			<a ng-click="masterVm.voteUp()" href><i class="fa fa-thumbs-up" aria-hidden="true"></i></a>
			<span class="rating-number">{{detailsVm.idea.votesUp - detailsVm.idea.votesDown}}</span>
			<a ng-click="masterVm.voteDown()" href><i class="fa fa-thumbs-up fa-rotate-180" aria-hidden="true"></i></a>	
		</div>
		<div class="main-compartment">
			<div class="stats">
				<div style="display:flex; flex-direction: column">
					<i class="fa fa-user-circle-o" style="font-size: 2rem"></i>
					<span ng-bind="detailsVm.idea.user"></span>
				</div> | 
				<span ng-bind="detailsVm.idea.status || 'open for votes'"></span> | 
				<span>{{parseInt(detailsVm.idea.votesUp, 10) + parseInt(detailsVm.idea.votesDown, 10) || 0}} Votes</span> | 
				<span>{{detailsVm.idea.comments.length}}<span> <i class="fa fa-commenting-o" style="font-size: 1.1em"></i>
			</div>
			<span style="color: #aaa" ng-bind="detailsVm.idea.publishDate"></span>
			<p ng-bind="detailsVm.idea.description" style="flex: 1 0 auto; margin: 0 0 10px;  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;font-size: 1.1em"></p>
		</div>
	</div>					
</div>

<div ng-if="detailsVm.idea.comments.length<1" style="margin-top:20px">Be the first one to comment!</div>
<div class="list-group" ng-if="detailsVm.idea.comments.length>0" style="margin-top:20px">
	<div class="list-group">
		<div ng-repeat="comment in detailsVm.idea.comments" class="list-group-item" style="display:flex; flex-direction:column">
			<div style="font-size: 0.9em;color:#848d95">
				<span ng-bind="comment.user"></span> said <span ng-if="comment.publishDate">on</span> <span ng-bind="comment.publishDate || 'recently'">:</span>
			</div>
			<span ng-bind="comment.text" style="font-size: 1.1em"></span>
			<a href ng-click="detailsVm.replyOpen(comment)" style="text-decoration:none; font-weight:bold" ng-hide="detailsVm.reply">Reply</a>
			<div style="margin-top:20px; margin-left:40px" ng-if="comment.replies.length>0">
				<div ng-repeat="reply in comment.replies" class="list-group-item">
					<span ng-bind="reply.text"></span> - <span style="font-size: 0.9em;" ng-bind="reply.user"></span> | 
					<span style="font-size: 0.9em;color:#848d95" ng-bind="reply.publishDate || 'recently'"></span>
				</div>
			</div>
			<div ng-if="detailsVm.comment && detailsVm.comment === comment" class="list-group-item" style="margin-left:40px; display:flex; flex-direction:column; background: #f4f4f4">
				<textarea class="form-control" placeholder="Type your reply here" ng-model="detailsVm.reply.text" style="width:100%; margin: 15px 0;"></textarea>
				<div class="button-group" style="margin: 5px 0;">
					<button class="btn btn-default" ng-click="detailsVm.replyPost()">Post</button>
					<button class="btn btn-default" ng-click="detailsVm.replyCancel()">Cancel</button>
				</div>
			</div>			
		</div>
	</div>
</div>

<div style="display:flex; flex-direction:column; margin: 10px 0">
	<span style="font-size: 1em;font-weight:bold; margin-bottom: 5px">Leave a comment</span>
	<form>
	  <div class="form-group">
	    <textarea  class="form-control" placeholder="Type your comment here" ng-model="detailsVm.comment.text" style="width:100%"></textarea>
	  </div>
	</form>	
	<button style="flex: 1 0 auto; align-self: flex-start;" class="btn btn-default" ng-click="detailsVm.postComment()" ng-hide="detailsVm.reply" ng-disabled="!detailsVm.comment.text">Post</button>	
</div>
